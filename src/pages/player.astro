---
import { Icon } from "astro-icon/components";
import PlayerBadge from "../components/PlayerBadge.astro";
import SearchBar from "../components/SearchBar.astro";
import Layout from "../layouts/Layout.astro";
import { SolidDungeons, SolidGrandMasters, SolidExoticMissions, SolidRaids } from "../components/DisplayActivities.tsx";
---

<Layout title="Guardian Rank Report">
	<script>
		import { GetInformationForMember } from "../stores/destinyPlayerData";

		window.addEventListener("DOMContentLoaded", async () => {
			const url = new URL(window.location.href);
			const params = new URLSearchParams(url.search);
			const bungieNetMembershipIdName = "id";
			const membershipTypeName = "type";
			const bungieNetMembershipId = params.get(bungieNetMembershipIdName);
			const membershipType = params.get(membershipTypeName);
			GetInformationForMember(bungieNetMembershipId!, parseInt(membershipType!));
		});
	</script>
	<main>
		<SearchBar />
		<PlayerBadge />
		<div class="content">
			<div style="color:white; font-family: 'Neue Haas Grotesk Text Pro','Helvetica', 'Arial', sans-serif; display: flex; flex-flow: row wrap; gap: 10px;">
				<div class="activityGroup">
					<div class="activityGroupCard">
						<h2 style="margin-block: 0px;">Raids</h2>
						<SolidRaids client:load>
							<Icon slot="loading" name="spinner" style="height: auto;width: auto; margin:auto 5px; color: white; " is:inline />
						</SolidRaids>
					</div>
				</div>
				<div class="activityGroup">
					<div class="activityGroupCard">
						<h2 style="margin-block: 0px;">Dungeons</h2>
						<SolidDungeons client:load>
							<Icon slot="loading" name="spinner" style="height: auto;width: auto; margin:auto 5px; color: white; " is:inline />
						</SolidDungeons>
					</div>
				</div>
				<div class="activityGroup">
					<div class="activityGroupCard">
						<h2 style="margin-block: 0px;">Grandmaster Nightfalls</h2>
						<SolidGrandMasters client:load>
							<Icon slot="loading" name="spinner" style="height: auto;width: auto; margin:auto 5px; color: white; " is:inline />
						</SolidGrandMasters>
					</div>
				</div>

				<div class="activityGroup">
					<div class="activityGroupCard">
						<h2 style="margin-block: 0px;">Exotic Missions</h2>
						<SolidExoticMissions client:load>
							<Icon slot="loading" name="spinner" style="height: auto;width: auto; margin:auto 5px; color: white; " is:inline />
						</SolidExoticMissions>
					</div>
				</div>
				
			</div>
		</div>
	</main>
</Layout>

<style>
	.activityGroup {
		display: flex;
		flex-direction: column;
		flex-grow: 1;
	}

	.activityGroupCard {
		margin: 0 auto;
		padding: 10px;
		background-color: #ffffff0f;
		border-radius: 10px;

	}
	.content {
		margin: auto;
		width: 900px;
		max-width: 100%;
		min-width: 476px;
		color: white;
		/* font-size: 20px; */
	}
</style>
